>原文地址：https://www.fuzzingbook.org/html/FuzzingInTheLarge.html

# Fuzzing in the Large

在前面的内容种，一直谈论的是仅在一台机器上进行fuzz，仅仅持续了几秒钟。然而在实际环境中，fuzz通常在数十甚至数千台机器上运行；持续数小时、数天甚至数周；用于一个或数十个不同的程序。在这种情况下，需要一种基础设施来收集来自各个模糊测试运行的故障数据，并将这些数据汇总到一个中央存储库中。在本节中，我们将研究这样的基础设施，即Mozilla的`FuzzManager`框架。这个基础设施有助于有效地管理大规模的模糊测试，并收集和分析故障数据。

# Collecting Crashes from Multiple Fuzzers

截至目前，我们所讨论的fuzz方案都是在一个机器上运行一个fuzzer来测试一个Program。可以很快的fuzz出来一些问题。实际环境中有很大的不同，我们所研究的是多个fuzzer，它们在多个机器上运行，测试多个程序(多个版本)，从而发现多个漏洞。然后必须由多个人来处理。导致的问题就是如何组织管理上面所说的操作，

协调多个fuzzer的最常用方法是使用中央数据库。收集所有的crashes和crashes信息。每当fuzzer检测到问题就连接到crashes server---然后将crashes信息存储在中央数据库中。

![image](https://github.com/kksaert/fuzzingbook/assets/83335903/130870b8-5bae-4899-acff-839a6fca7522)

然后通过查找数据库来查看发现产生的问题。通常使用Web界面，还可以与其他活动集成起来(与CI/CD类似)，最重要的是，crash database可以与*bug database*关联起来。这样，可以将bugs(=crashes)分配给个别开发人员。

在上面这种基础结构中，不仅可以从fuzzer收集crashes，在在实际使用中发生的崩溃和故障也可以自动报告给crash server。在工业界，生产环境实际出现数千个崩溃是很常见的。尤其那些每天需要被高度使用的程序。

这样的数据库存储哪些信息呢？

- 最重要的是产品的标识符-即产品名称，版本信息，平台，和操作系统，没有这些信息的话，开发人员无法确定该缺陷是否仍然存在于最新版本中，或者是否已经修复。

- 对调试而言，对开发人员最有帮助的信息是重现故障的步骤 - 在模糊测试场景中，这将是涉及问题程序的输入数据。 （在生产场景中，由于明显的隐私原因，不会收集用户的输入数据。）

- 对于调试而言，堆栈跟踪信息也很有用，开发人员可以查看在故障发生时活动的内部功能。对覆盖率信息统计非常有用，因为开发人员可以查询哪些函数被执行，哪些未被执行。

  

经过适当的设置，我们就可以自动化的来收集上述信息，接下来将介绍`FuzzManager` 平台：

- 从失败的运行中收集故障数据
- 将这些数据输入到集中式服务器中
- 通过 Web 界面查询数据

# Running a Crash Server

[FuzzManager](https://github.com/MozillaSecurity/FuzzManager)是用于管理大规模fuzz的工具链。它是模块化的，意味着您可以利用您所需要的部分；它是多功能的，不会强加特定的流程。它由一个服务器组成，其任务是收集崩溃数据，以及各种收集器工具，这些工具用于收集崩溃数据并将其发送到服务器。

## Setting up the Server

> 这里使用0.4.1版本的FuzzManager做演示

克隆项目：`git clone https://github.com/uds-se/FuzzManager`

